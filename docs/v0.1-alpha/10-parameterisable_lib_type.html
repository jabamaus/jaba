<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
  <head>
    <title>10-parameterisable_lib_type</title>
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Code&display=swap">
    <link rel="stylesheet" href="../mamd.css">
  </head>
<body>
<h2>10-parameterisable_lib_type</h2>

<p><sub><sup>This page applies to v0.1-alpha<br></sup></sub>
<a href="../index.html">home</a> &gt; <a href="index.html">0.1-alpha home</a></p>

<pre><code class="ruby"># This example demonstrates how to set up a lib so that it can be either static or dynamic without duplicating code or
# changing the app that depends on it.

extend_jdl do
  attr :lib_type, type: :choice do
    title &quot;Lib type&quot;
    items [:lib, :dll]
    default :lib
  end
end

target :AppWithStaticOrDynamicLib do
  type :console
  src &#39;main.cpp&#39;
  deps [:StaticOrDynamicLib]
end

target :StaticOrDynamicLib, root: &#39;StaticOrDynamicLib&#39; do
  type lib_type
  src [&#39;.&#39;]
  inc [&#39;include&#39;], :export
  case type
  when :lib
    define [&#39;SODL_STATIC&#39;], :export
  when :dll
    define [&#39;DLL_EXPORT&#39;]
  end
end
</code></pre>

<p><sub><sup>Generated on 05-Sep-23 by <a href="https://github.com/vmg/redcarpet">Redcarpet</a> using <a href="https://github.com/alecthomas/chroma">Chroma</a>, <a href="https://rsms.me/inter">Inter</a> and <a href="https://github.com/tonsky/FiraCode">FiraCode</a>. css by Harry Denholm</sup></sub></p>
</body>
</html>
