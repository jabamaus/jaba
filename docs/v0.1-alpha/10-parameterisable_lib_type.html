<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
    <head>
        <title>10-parameterisable_lib_type</title>
        <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Code&display=swap"> 
        <link rel="stylesheet" href="../mamd.css">
    </head>
    <body>
        <h2 id="10-parameterisable-lib-type">10-parameterisable_lib_type</h2>
<p><sub><sup>This page applies to v0.1-alpha<br></sup></sub>
<a href="../index.html">home</a> &gt; <a href="index.html">0.1-alpha home</a></p>
<pre style="color:#272822;background-color:#fafafa"><span style="color:#75715e"># This example demonstrates how to set up a lib so that it can be either static or dynamic without duplicating code or</span>
<span style="color:#75715e"># changing the app that depends on it.</span>

<span style="color:#111">extend_jdl</span> <span style="color:#00a8c8">do</span>
  <span style="color:#00a8c8">attr</span> <span style="color:#d88200">:lib_type</span><span style="color:#111">,</span> <span style="color:#d88200">type</span><span style="color:#111">:</span> <span style="color:#d88200">:choice</span> <span style="color:#00a8c8">do</span>
    <span style="color:#111">title</span> <span style="color:#d88200">&#34;</span><span style="color:#d88200">Lib type</span><span style="color:#d88200">&#34;</span>
    <span style="color:#111">items</span> <span style="color:#f92672">[</span><span style="color:#d88200">:lib</span><span style="color:#111">,</span> <span style="color:#d88200">:dll</span><span style="color:#f92672">]</span>
    <span style="color:#111">default</span> <span style="color:#d88200">:lib</span>
  <span style="color:#00a8c8">end</span>
<span style="color:#00a8c8">end</span>

<span style="color:#111">target</span> <span style="color:#d88200">:AppWithStaticOrDynamicLib</span> <span style="color:#00a8c8">do</span>
  <span style="color:#111">type</span> <span style="color:#d88200">:console</span>
  <span style="color:#111">src</span> <span style="color:#d88200">&#39;main.cpp&#39;</span>
  <span style="color:#111">deps</span> <span style="color:#f92672">[</span><span style="color:#d88200">:StaticOrDynamicLib</span><span style="color:#f92672">]</span>
<span style="color:#00a8c8">end</span>

<span style="color:#111">target</span> <span style="color:#d88200">:StaticOrDynamicLib</span><span style="color:#111">,</span> <span style="color:#d88200">root</span><span style="color:#111">:</span> <span style="color:#d88200">&#39;StaticOrDynamicLib&#39;</span> <span style="color:#00a8c8">do</span>
  <span style="color:#111">type</span> <span style="color:#111">lib_type</span>
  <span style="color:#111">src</span> <span style="color:#f92672">[</span><span style="color:#d88200">&#39;.&#39;</span><span style="color:#f92672">]</span>
  <span style="color:#111">inc</span> <span style="color:#f92672">[</span><span style="color:#d88200">&#39;include&#39;</span><span style="color:#f92672">]</span><span style="color:#111">,</span> <span style="color:#d88200">:export</span>
  <span style="color:#00a8c8">case</span> <span style="color:#111">type</span>
  <span style="color:#00a8c8">when</span> <span style="color:#d88200">:lib</span>
    <span style="color:#111">define</span> <span style="color:#f92672">[</span><span style="color:#d88200">&#39;SODL_STATIC&#39;</span><span style="color:#f92672">]</span><span style="color:#111">,</span> <span style="color:#d88200">:export</span>
  <span style="color:#00a8c8">when</span> <span style="color:#d88200">:dll</span>
    <span style="color:#111">define</span> <span style="color:#f92672">[</span><span style="color:#d88200">&#39;DLL_EXPORT&#39;</span><span style="color:#f92672">]</span>
  <span style="color:#00a8c8">end</span>
<span style="color:#00a8c8">end</span>
</pre><p><sub><sup>Generated on 04-Sep-23 by <a href="https://github.com/ishani/MaMD">MaMD</a> using <a href="https://github.com/yuin/goldmark">Goldmark</a>, <a href="https://github.com/alecthomas/chroma">Chroma</a>, <a href="https://rsms.me/inter">Inter</a> and <a href="https://github.com/tonsky/FiraCode">FiraCode</a></sup></sub></p>

    </body>
</html>